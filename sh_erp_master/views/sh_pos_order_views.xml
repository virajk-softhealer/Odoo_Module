<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- SEARCH VIEW -->
    <!-- <record id="sh_pos_order_line_view_search" model="ir.ui.view">
        <field name="name">sh_pos_order_line.view.search</field>
        <field name="model">sh.pos.order.line</field>
        <field name="arch" type="xml">
            <search string="Pos order line">
                <field name="" string="" />
            </search>
        </field>
    </record> -->

    <!-- FORM VIEW -->
    <record id="sh_pos_order_form_view" model="ir.ui.view">
        <field name="name">sh.pos.order.form.view</field>
        <field name="model">sh.pos.order</field>
        <field name="arch" type="xml">
            <form string="">
                <header>
                </header>
                <sheet>
                    <div class="oe_title">
                        <label for="name"/>
                        <h1><field name="name" class="oe_inline"/></h1>
                    </div>
                    <group>
                        <group>
                            <field name="sh_shop_id" />
                            <field name="sh_pos_session_id" />
                            <field name="partner_id" widget="res_partner_many2one"/>
                        </group>
                        <group>
                            <field name="res_id" />
                            <!-- <field name="sh_session_id" /> -->
                            <field name="date_order" />
                        </group>
                    </group>
                    <notebook colspan="4">
                        <page string="Order Line" name="pos_order_line">
                            <field name="sh_pos_order_line" colspan="4" nolabel="1"  widget="one2many" mode="tree">
                                <tree no_open="1">
                                    <field name="name" optional="hide"/>
                                    <field name="res_id"/>
                                    <field name="full_product_name"/>
                                    <field name="qty" />
                                    <field name="price_unit"/>
                                    <field name="discount"/>
                                    <field name="price_subtotal"/>
                                    <field name="price_subtotal_incl"/>
                                </tree>
                            </field>
                            <group class="oe_subtotal_footer oe_right" colspan="2" name="order_total">
                                <field name="amount_tax"
                                       force_save="1"/>
                                <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                    <label for="amount_total" />
                                </div>
                                <field name="amount_total"
                                       force_save="1"
                                       nolabel="1"
                                       class="oe_subtotal_footer_separator"/>
                                <field name="amount_paid"
                                    string="Total Paid"
                                    class="oe_subtotal_footer_separator"
                                    attrs="{'invisible': [('amount_paid','=', 'amount_total')]}"/>
                            </group>
                            <div class="clearfix"/>
                        </page>
                        <page string="Payment Line" name="pos_payment_line">
                            <field name="sh_pos_payment_line" colspan="4" nolabel="1" widget="one2many" mode="tree">
                                <tree no_open="1">
                                    <field name="name" optional="hide"/>
                                    <field name="res_id"/>
                                    <field name="sh_pos_session_id" />
                                    <field name="partner_id"/>
                                    <field name="payment_method"/>
                                    <field name="payment_date"/>
                                    <field name="amount"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- TREE VIEW -->
    <record id="sh_pos_order_view_tree" model="ir.ui.view">
        <field name="name">sh.pos.order.view.tree</field>
        <field name="model">sh.pos.order</field>
        <field name="arch" type="xml">
            <tree string="Pos Order">
                <field name="sh_shop_id" />
                <field name="name" />
                <field name="res_id" />
                <field name="sh_pos_session_id" />
                <field name="date_order" />
                <field name="partner_id"/>
                <field name="amount_tax" />
                <field name="amount_total" />
                <field name="amount_paid" />
            </tree>
        </field>
    </record>

    <!-- ACTION -->
    <record id="sh_pos_order_action" model="ir.actions.act_window">
        <field name="name">Client POS Orders</field>
        <field name="res_model">sh.pos.order</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{ 'create':0, 'edit':0 }</field>
    </record>

    <!-- MENU -->
    <menuitem
        id="sh_pos_order_menu"
        name="Client POS Orders"
        action="sh_pos_order_action"
        sequence="1"/>

</odoo>